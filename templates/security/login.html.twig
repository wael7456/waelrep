{% extends 'base.html.twig' %}
{% block title %}Connexion - Medicacom Recrutement{% endblock %}

{% block meta %}
  <meta name="description" content="Accédez à votre espace recrutement Medicacom. Plateforme spécialisée dans le recrutement médical et paramédical.">
  <meta name="keywords" content="medicacom, recrutement médical, emploi santé, connexion">
{% endblock %}



{% block body %}
<div class="login-container">
  <link rel="stylesheet" href="{{ asset('css/login-styles.css') }}">

  <!-- Section gauche - Branding Medicacom -->
  <div class="login-left">
    <div class="brand-section">
      <div class="brand-logo">
        <img src="https://media.licdn.com/dms/image/v2/D4D0BAQFj2wfKLc-iyQ/company-logo_200_200/company-logo_200_200/0/1704026030896/medicacom_logo?e=1755129600&v=beta&t=4Vmp-GVGPKjqD8NVzS2Ku1cEAqc2LBmKQjCZmycwU58" 
             alt="Logo Medicacom"
             onerror="this.style.display='none'; this.parentNode.innerHTML='<div style=\'font-size:2.5rem;color:white;\'>🏥</div>'">
      </div>
      <h1 class="brand-title">Medicacom</h1>
      <p class="brand-subtitle">
        Plateforme de recrutement spécialisée dans le secteur médical et paramédical. 
        Connectez-vous pour accéder à votre espace recruteur.
      </p>
      
      <div class="brand-features">
        <div class="feature-item">
          <div class="feature-icon">👨‍⚕️</div>
          <span>Recrutement médical spécialisé</span>
        </div>
        <div class="feature-item">
          <div class="feature-icon">🎯</div>
          <span>Matching intelligent candidat-poste</span>
        </div>
        <div class="feature-item">
          <div class="feature-icon">📊</div>
          <span>Suivi avancé des candidatures</span>
        </div>
        <div class="feature-item">
          <div class="feature-icon">🔒</div>
          <span>Données sécurisées RGPD</span>
        </div>
      </div>
      
      <div class="medical-badge">
        <span>🏥</span>
        <span>Certifié secteur santé</span>
      </div>
    </div>
  </div>

  <!-- Section droite - Formulaire de connexion -->
  <div class="login-right">
    <div class="login-form-container">
      <div class="form-header">
        <h2 class="form-title">Espace Candidat</h2>
        <p class="form-subtitle">Connectez-vous à votre tableau de bord</p>
      </div>

      {% if error %}
        <div class="alert alert-danger">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
          </svg>
          {{ error.messageKey|trans(error.messageData, 'security') }}
        </div>
      {% endif %}

      <form method="post" novalidate id="loginForm">
        <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">
        
        <div class="form-group">
          <label for="email" class="form-label">📧 Adresse email professionnelle</label>
          <input 
            type="email" 
            id="email" 
            name="email" 
            class="form-input" 
            placeholder="votre.email@medicacom.com"
            required 
            autofocus
            value="{{ last_username ?? '' }}"
          >
        </div>

        <div class="form-group">
          <label for="password" class="form-label">🔐 Mot de passe</label>
          <input 
            type="password" 
            id="password" 
            name="password" 
            class="form-input" 
            placeholder="Entrez votre mot de passe sécurisé"
            required
          >
        </div>

        <div class="checkbox-group">
          <input type="checkbox" id="remember" name="_remember_me" class="checkbox">
          <label for="remember" class="checkbox-label">Se souvenir de moi sur cet appareil</label>
        </div>

        <button type="submit" class="btn-primary" id="loginBtn">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" style="margin-right: 0.5rem;">
            <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
          </svg>
          Accéder au tableau de bord
        </button>
      </form>

      

     

      <div class="footer-links">
        <a href="{{ path('app_register') }}">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="margin-right: 0.5rem; vertical-align: middle;">
            <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V22H15V16H9V22H3V9L12 2L21 9Z"/>
          </svg>
          Créer un nouveau compte 
        </a>
        <span style="margin: 0 1.5rem; color: #cbd5e1;">•</span>
        
      </div>

      <div style="text-align: center; margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid #f1f5f9; color: #64748b; font-size: 0.85rem;">
        <p>
          <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor" style="margin-right: 0.5rem; vertical-align: middle;">
            <path d="M18,8A6,6 0 0,0 12,2A6,6 0 0,0 6,8H4A2,2 0 0,0 2,10V20A2,2 0 0,0 4,22H20A2,2 0 0,0 22,20V10A2,2 0 0,0 20,8H18M12,4A4,4 0 0,1 16,8H8A4,4 0 0,1 12,4Z"/>
          </svg>
          Connexion sécurisée SSL • Conforme RGPD • Données de santé protégées
        </p>
      </div>
    </div>
  </div>
</div>

<script>
document.getElementById('loginForm').addEventListener('submit', function(e) {
  const btn = document.getElementById('loginBtn');
  btn.classList.add('loading');
  btn.disabled = true;
  
  // Simulation de feedback utilisateur
  setTimeout(() => {
    if (!btn.classList.contains('success')) {
      btn.textContent = 'Vérification en cours...';
    }
  }, 100);
});

// Validation en temps réel
document.getElementById('email').addEventListener('input', function(e) {
  const email = e.target.value;
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  
  if (email && !emailRegex.test(email)) {
    e.target.style.borderColor = '#ef4444';
  } else {
    e.target.style.borderColor = '#e2e8f0';
  }
});
</script>
{% endblock %}